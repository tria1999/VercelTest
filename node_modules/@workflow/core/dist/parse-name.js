/**
 * Parse a machine readable name.
 *
 * @see {@link ../../swc-plugin-workflow/transform/src/naming.rs} for the naming scheme.
 */
function parseName(tag, name) {
    if (typeof name !== 'string') {
        return null;
    }
    // Looks like {prefix}//{filepath}//{function_name}"
    // Where:
    // - {prefix} is either 'workflow' or 'step'
    // - {filepath} is the path to the file
    // - {function_name} is the name of the function
    const [prefix, path, ...functionNameParts] = name.split('//');
    if (prefix !== tag || !path || functionNameParts.length === 0) {
        return null;
    }
    let shortName = functionNameParts.at(-1) ?? '';
    const functionName = functionNameParts.join('//');
    const filename = path.split('/').at(-1) ?? '';
    const fileNameWithoutExtension = filename.split('.').at(0) ?? '';
    // Default exports will use the file name as the short name. "__default" was only
    // used for one package version, so this is a minor backwards compatibility fix.
    if (['default', '__default'].includes(shortName) &&
        fileNameWithoutExtension) {
        shortName = fileNameWithoutExtension;
    }
    return {
        shortName,
        path,
        functionName,
    };
}
/**
 * Parse a workflow name into its components.
 *
 * @param name - The workflow name to parse.
 * @returns An object with `shortName`, `path`, and `functionName` properties.
 * When the name is invalid, returns `null`.
 */
export function parseWorkflowName(name) {
    return parseName('workflow', name);
}
/**
 * Parse a step name into its components.
 *
 * @param name - The step name to parse.
 * @returns An object with `shortName`, `path`, and `functionName` properties.
 * When the name is invalid, returns `null`.
 */
export function parseStepName(name) {
    return parseName('step', name);
}
/**
 * Parse a class ID into its components.
 *
 * @param name - The class ID to parse (e.g., "class//path/to/file.ts//ClassName").
 * @returns An object with `shortName`, `path`, and `functionName` (className) properties.
 * When the name is invalid, returns `null`.
 */
export function parseClassName(name) {
    return parseName('class', name);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2UtbmFtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJzZS1uYW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFDSCxTQUFTLFNBQVMsQ0FDaEIsR0FBVyxFQUNYLElBQVk7SUFFWixJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsRUFBRSxDQUFDO1FBQzdCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNELG9EQUFvRDtJQUNwRCxTQUFTO0lBQ1QsNENBQTRDO0lBQzVDLHVDQUF1QztJQUN2QyxnREFBZ0Q7SUFDaEQsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxpQkFBaUIsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUQsSUFBSSxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxJQUFJLGlCQUFpQixDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUM5RCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxJQUFJLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDL0MsTUFBTSxZQUFZLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzlDLE1BQU0sd0JBQXdCLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBRWpFLGlGQUFpRjtJQUNqRixnRkFBZ0Y7SUFDaEYsSUFDRSxDQUFDLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO1FBQzVDLHdCQUF3QixFQUN4QixDQUFDO1FBQ0QsU0FBUyxHQUFHLHdCQUF3QixDQUFDO0lBQ3ZDLENBQUM7SUFFRCxPQUFPO1FBQ0wsU0FBUztRQUNULElBQUk7UUFDSixZQUFZO0tBQ2IsQ0FBQztBQUNKLENBQUM7QUFFRDs7Ozs7O0dBTUc7QUFDSCxNQUFNLFVBQVUsaUJBQWlCLENBQUMsSUFBWTtJQUM1QyxPQUFPLFNBQVMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDckMsQ0FBQztBQUVEOzs7Ozs7R0FNRztBQUNILE1BQU0sVUFBVSxhQUFhLENBQUMsSUFBWTtJQUN4QyxPQUFPLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDakMsQ0FBQztBQUVEOzs7Ozs7R0FNRztBQUNILE1BQU0sVUFBVSxjQUFjLENBQUMsSUFBWTtJQUN6QyxPQUFPLFNBQVMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDbEMsQ0FBQyJ9